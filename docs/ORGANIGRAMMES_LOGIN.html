<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Organigrammes du Processus de Login - EduCam</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .metadata {
            background: #f8f9fa;
            padding: 20px 40px;
            border-bottom: 2px solid #667eea;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
        }

        .metadata-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .metadata-item strong {
            color: #667eea;
        }

        .content {
            padding: 40px;
        }

        .intro {
            background: linear-gradient(135deg, #e0e7ff 0%, #f0e7ff 100%);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 40px;
            border-left: 5px solid #667eea;
        }

        .intro h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.8em;
        }

        .intro ul {
            margin-left: 20px;
            margin-top: 15px;
        }

        .intro li {
            margin: 8px 0;
        }

        .diagram-section {
            margin-bottom: 60px;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .diagram-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        .diagram-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
        }

        .diagram-number {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(102, 126, 234, 0.3);
        }

        .diagram-header h3 {
            font-size: 1.6em;
            color: #333;
            flex: 1;
        }

        .diagram-description {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
        }

        .diagram-image {
            width: 100%;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .diagram-image:hover {
            transform: scale(1.02);
        }

        .legend {
            background: linear-gradient(135deg, #fff5e1 0%, #ffe4e1 100%);
            padding: 30px;
            border-radius: 15px;
            margin-top: 40px;
            border: 2px solid #ff9800;
        }

        .legend h3 {
            color: #ff9800;
            margin-bottom: 20px;
            font-size: 1.6em;
        }

        .legend-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .legend-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .color-box {
            width: 30px;
            height: 30px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        footer {
            background: #333;
            color: white;
            padding: 30px 40px;
            text-align: center;
        }

        footer p {
            margin: 5px 0;
        }

        .toc {
            background: #e8eaf6;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 40px;
        }

        .toc h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .toc ol {
            margin-left: 25px;
        }

        .toc li {
            margin: 10px 0;
            font-size: 1.1em;
        }

        .toc a {
            color: #667eea;
            text-decoration: none;
            transition: color 0.3s;
        }

        .toc a:hover {
            color: #764ba2;
            text-decoration: underline;
        }

        @media print {
            body {
                background: white;
            }

            .diagram-section {
                page-break-inside: avoid;
            }
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            .metadata {
                flex-direction: column;
            }

            .content {
                padding: 20px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>ğŸ” Organigrammes du Processus de Login</h1>
            <p>EduCam - Bac-X_237</p>
        </header>

        <div class="metadata">
            <div class="metadata-item">
                <strong>ğŸ“… Date:</strong>
                <span>2025-12-03</span>
            </div>
            <div class="metadata-item">
                <strong>ğŸ“Œ Version:</strong>
                <span>1.0.0</span>
            </div>
            <div class="metadata-item">
                <strong>ğŸ—ï¸ Architecture:</strong>
                <span>Offline-First avec Synchronisation DiffÃ©rÃ©e</span>
            </div>
            <div class="metadata-item">
                <strong>ğŸ‘¨â€ğŸ’» Auteur:</strong>
                <span>ExcelL44 Team</span>
            </div>
        </div>

        <div class="content">
            <div class="intro">
                <h2>ğŸ“– Introduction</h2>
                <p>Ce document prÃ©sente les organigrammes visuels dÃ©taillant le processus complet d'authentification de
                    l'application EduCam, depuis le dÃ©marrage de l'application jusqu'Ã  l'affichage du menu principal.
                </p>
                <p><strong>Technologies clÃ©s utilisÃ©es :</strong></p>
                <ul>
                    <li>ğŸ¨ <strong>Jetpack Compose</strong> - Framework UI moderne et rÃ©actif</li>
                    <li>ğŸ§  <strong>Pattern MVI</strong> - Model-View-Intent pour la gestion d'Ã©tat</li>
                    <li>ğŸ’¾ <strong>Room Database</strong> - Persistance locale SQLite type-safe</li>
                    <li>ğŸ” <strong>EncryptedSharedPreferences</strong> - Stockage sÃ©curisÃ© AES-256</li>
                    <li>ğŸ”‘ <strong>PBKDF2</strong> - Hashing de mots de passe avec 10,000 itÃ©rations</li>
                    <li>âš¡ <strong>Coroutines Kotlin</strong> - Gestion asynchrone thread-safe</li>
                    <li>ğŸ’‰ <strong>Hilt</strong> - Injection de dÃ©pendances</li>
                </ul>
            </div>

            <div class="toc">
                <h3>ğŸ“‘ Table des MatiÃ¨res</h3>
                <ol>
                    <li><a href="#diagram1">Flux Complet - Du DÃ©marrage au Menu Principal</a></li>
                    <li><a href="#diagram2">Architecture en Couches</a></li>
                    <li><a href="#diagram3">SÃ©quence de Login RÃ©ussi</a></li>
                    <li><a href="#diagram4">Machine Ã  Ã‰tats d'Authentification</a></li>
                    <li><a href="#diagram5">Processus de Validation PBKDF2</a></li>
                    <li><a href="#diagram6">Architecture de Persistance des DonnÃ©es</a></li>
                    <li><a href="#diagram7">Navigation Flow ComplÃ¨te</a></li>
                </ol>
            </div>

            <!-- Diagramme 1 -->
            <div class="diagram-section" id="diagram1">
                <div class="diagram-header">
                    <div class="diagram-number">1</div>
                    <h3>Flux Complet - Du DÃ©marrage au Menu Principal</h3>
                </div>
                <div class="diagram-description">
                    <p>Ce diagramme montre le parcours complet d'un utilisateur depuis le lancement de l'application
                        jusqu'Ã  l'affichage du menu principal. Il inclut :</p>
                    <ul>
                        <li>âœ… Initialisation de l'application (MainActivity.onCreate)</li>
                        <li>ğŸ§¹ Nettoyage automatique des comptes expirÃ©s (> 24h)</li>
                        <li>ğŸ” VÃ©rification de session existante (SecurePrefs)</li>
                        <li>ğŸ“± Affichage du Splash Screen</li>
                        <li>ğŸ” Processus de login avec validation PBKDF2</li>
                        <li>ğŸ’¾ CrÃ©ation de session sÃ©curisÃ©e</li>
                        <li>ğŸ  Navigation vers le HomeScreen</li>
                        <li>âŒ Gestion des erreurs avec possibilitÃ© de retry</li>
                    </ul>
                </div>
                <img src="login_flow_complete.png" alt="Flux complet du login" class="diagram-image">
            </div>

            <!-- Diagramme 2 -->
            <div class="diagram-section" id="diagram2">
                <div class="diagram-header">
                    <div class="diagram-number">2</div>
                    <h3>Architecture en Couches</h3>
                </div>
                <div class="diagram-description">
                    <p>Cette architecture en 4 couches distinctes respecte les principes de Clean Architecture et de
                        sÃ©paration des responsabilitÃ©s :</p>
                    <ul>
                        <li>ğŸ¨ <strong>Couche UI (Presentation)</strong> : MainActivity, LoginScreen, NavGraph,
                            AuthViewModel</li>
                        <li>ğŸ§  <strong>Couche Domain (Business Logic)</strong> : AuthState, AuthRepository</li>
                        <li>ğŸ’¾ <strong>Couche Data (Persistence)</strong> : SecurePrefs (chiffrÃ©), UserDao, Room
                            Database</li>
                        <li>âš™ï¸ <strong>Couche Infrastructure</strong> : NetworkObserver, Logger, Hilt DI</li>
                    </ul>
                </div>
                <img src="architecture_layers.png" alt="Architecture en couches" class="diagram-image">
            </div>

            <!-- Diagramme 3 -->
            <div class="diagram-section" id="diagram3">
                <div class="diagram-header">
                    <div class="diagram-number">3</div>
                    <h3>SÃ©quence de Login RÃ©ussi</h3>
                </div>
                <div class="diagram-description">
                    <p>Ce diagramme de sÃ©quence UML illustre les interactions chronologiques entre tous les composants
                        lors d'un login rÃ©ussi :</p>
                    <ul>
                        <li>ğŸ‘¤ Utilisateur entre pseudo + code</li>
                        <li>ğŸ“± LoginScreen appelle AuthViewModel.login()</li>
                        <li>â³ Ã‰tat mis Ã  jour : AuthState.Loading</li>
                        <li>ğŸ” AuthRepository interroge la base de donnÃ©es</li>
                        <li>ğŸ” Validation du password avec PBKDF2</li>
                        <li>ğŸ’¾ SecurePrefs sauvegarde la session (chiffrÃ©)</li>
                        <li>âœ… Ã‰tat mis Ã  jour : AuthState.Authenticated</li>
                        <li>ğŸŒ NavGraph navigue vers HomeScreen</li>
                    </ul>
                </div>
                <img src="login_sequence_diagram.png" alt="SÃ©quence de login" class="diagram-image">
            </div>

            <!-- Diagramme 4 -->
            <div class="diagram-section" id="diagram4">
                <div class="diagram-header">
                    <div class="diagram-number">4</div>
                    <h3>Machine Ã  Ã‰tats d'Authentification</h3>
                </div>
                <div class="diagram-description">
                    <p>Cette machine Ã  Ã©tats (State Machine) montre tous les Ã©tats possibles de l'authentification et
                        leurs transitions :</p>
                    <ul>
                        <li>ğŸŸ¡ <strong>Loading</strong> : Chargement initial ou action en cours</li>
                        <li>ğŸŸ¢ <strong>Authenticated</strong> : Utilisateur connectÃ© (Ã©tat principal)</li>
                        <li>ğŸ”´ <strong>Unauthenticated</strong> : Aucune session active</li>
                        <li>ğŸŸ  <strong>Error</strong> : Erreur lors de l'authentification (peut retry)</li>
                        <li>ğŸ”µ <strong>NeedsSync</strong> : DonnÃ©es locales Ã  synchroniser</li>
                        <li>ğŸŸ£ <strong>OfflineTrial</strong> : Compte en pÃ©riode d'essai 24h</li>
                        <li>âš« <strong>Passive</strong> : Compte passif (accÃ¨s limitÃ©)</li>
                    </ul>
                </div>
                <img src="auth_state_machine.png" alt="Machine Ã  Ã©tats" class="diagram-image">
            </div>

            <!-- Diagramme 5 -->
            <div class="diagram-section" id="diagram5">
                <div class="diagram-header">
                    <div class="diagram-number">5</div>
                    <h3>Processus de Validation PBKDF2</h3>
                </div>
                <div class="diagram-description">
                    <p>Ce diagramme dÃ©taille le processus cryptographique de hashing et de validation des mots de passe
                        :</p>
                    <ul>
                        <li>ğŸ“ <strong>Inscription</strong> : GÃ©nÃ©ration d'un salt alÃ©atoire unique (16 bytes) â†’ Hash
                            PBKDF2 (10,000 iterations) â†’ Stockage en DB</li>
                        <li>ğŸ”‘ <strong>Login</strong> : RÃ©cupÃ©ration du salt stockÃ© â†’ Hash du password input avec mÃªme
                            salt â†’ Comparaison des hashes</li>
                        <li>ğŸ”’ <strong>Algorithme</strong> : PBKDF2-HMAC-SHA256 (API â‰¥ 26) ou SHA1 (API < 26)</li>
                        <li>âš¡ <strong>ParamÃ¨tres</strong> : 10,000 itÃ©rations, output 256 bits</li>
                        <li>ğŸ›¡ï¸ <strong>Protection</strong> : RÃ©sistance aux rainbow tables et brute force</li>
                    </ul>
                </div>
                <img src="pbkdf2_process.png" alt="Processus PBKDF2" class="diagram-image">
            </div>

            <!-- Diagramme 6 -->
            <div class="diagram-section" id="diagram6">
                <div class="diagram-header">
                    <div class="diagram-number">6</div>
                    <h3>Architecture de Persistance des DonnÃ©es</h3>
                </div>
                <div class="diagram-description">
                    <p>Ce diagramme illustre comment les donnÃ©es sont stockÃ©es de maniÃ¨re sÃ©curisÃ©e et organisÃ©e :</p>
                    <ul>
                        <li>ğŸ” <strong>SecurePrefs (ChiffrÃ© AES-256)</strong> : user_id, offline_pseudo, offline_hash,
                            auth_mode</li>
                        <li>ğŸ’¾ <strong>Room Database (SQLite)</strong> : User Entity complÃ¨te (id, pseudo, passwordHash,
                            salt, role, syncStatus, etc.)</li>
                        <li>ğŸ“ <strong>SharedPreferences (Clair)</strong> : MÃ©tadonnÃ©es non sensibles (account_type,
                            trial_start_date, phone_count)</li>
                        <li>ğŸ”‘ <strong>MasterKey</strong> : StockÃ© dans Android Keystore (hardware-backed si disponible)
                        </li>
                        <li>ğŸ›¡ï¸ <strong>Encryption Scheme</strong> : Keys (AES-256-SIV), Values (AES-256-GCM)</li>
                    </ul>
                </div>
                <img src="data_persistence.png" alt="Architecture de persistance" class="diagram-image">
            </div>

            <!-- Diagramme 7 -->
            <div class="diagram-section" id="diagram7">
                <div class="diagram-header">
                    <div class="diagram-number">7</div>
                    <h3>Navigation Flow ComplÃ¨te</h3>
                </div>
                <div class="diagram-description">
                    <p>Ce diagramme prÃ©sente tous les Ã©crans de l'application et leurs connexions de navigation :</p>
                    <ul>
                        <li>ğŸŸ£ <strong>Splash Screen</strong> : Point d'entrÃ©e de l'application</li>
                        <li>ğŸ”´ <strong>Login/Register</strong> : Ã‰crans d'authentification</li>
                        <li>ğŸŸ¢ <strong>Home Screen</strong> : Hub central avec accÃ¨s Ã  toutes les fonctionnalitÃ©s</li>
                        <li>ğŸ”µ <strong>Quiz, MatiÃ¨res, Chat (Smarty IA), Problem Solver</strong> : FonctionnalitÃ©s
                            principales</li>
                        <li>ğŸŸ¤ <strong>Profile, Bilan</strong> : Gestion du compte utilisateur</li>
                        <li>âš™ï¸ <strong>Admin Menu, Remote Dashboard, Local Database</strong> : Outils d'administration
                            (role=ADMIN uniquement)</li>
                    </ul>
                </div>
                <img src="navigation_flow.png" alt="Navigation flow" class="diagram-image">
            </div>

            <!-- LÃ©gende -->
            <div class="legend">
                <h3>ğŸ¨ LÃ©gende des Couleurs</h3>
                <div class="legend-grid">
                    <div class="legend-item">
                        <div class="color-box" style="background: #4CAF50;"></div>
                        <span><strong>Vert</strong> - Ã‰tats de succÃ¨s, processus validÃ©s</span>
                    </div>
                    <div class="legend-item">
                        <div class="color-box" style="background: #F44336;"></div>
                        <span><strong>Rouge</strong> - Erreurs, Ã©tats d'Ã©chec</span>
                    </div>
                    <div class="legend-item">
                        <div class="color-box" style="background: #2196F3;"></div>
                        <span><strong>Bleu</strong> - Navigation, destination finale</span>
                    </div>
                    <div class="legend-item">
                        <div class="color-box" style="background: #FFC107;"></div>
                        <span><strong>Jaune</strong> - Ã‰tats de chargement, avertissements</span>
                    </div>
                    <div class="legend-item">
                        <div class="color-box" style="background: #9C27B0;"></div>
                        <span><strong>Violet</strong> - Processus cryptographiques critiques</span>
                    </div>
                    <div class="legend-item">
                        <div class="color-box" style="background: #FF9800;"></div>
                        <span><strong>Orange</strong> - Ã‰tats intermÃ©diaires importants</span>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p><strong>EduCam - Bac-X_237</strong></p>
            <p>ğŸ“… DerniÃ¨re mise Ã  jour : 2025-12-03 | ğŸ“Œ Version 1.0.0</p>
            <p>ğŸ‘¨â€ğŸ’» DÃ©veloppÃ© par ExcelL44 Team</p>
            <p style="margin-top: 15px; opacity: 0.8;">
                ğŸ” Architecture Offline-First | ğŸ›¡ï¸ SÃ©curitÃ© AES-256 & PBKDF2 | âš¡ Performance optimisÃ©e
            </p>
        </footer>
    </div>
</body>

</html>